# GiftyTask を Xcode で開いて実機で動作確認する手順

## 1. Xcode でプロジェクトを開く

1. **Finder** で次のフォルダを開く  
   `kaihatu/taskapp/GiftyTask/`
2. **GiftyTask.xcodeproj** をダブルクリックして Xcode で開く  
   （または Xcode を起動 → **File → Open** で `taskapp/GiftyTask/GiftyTask.xcodeproj` を選択）

> 注意: リポジトリのルート `taskapp` ではなく、**GiftyTask** フォルダ内の **GiftyTask.xcodeproj** を開いてください。

---

## 2. 実機を接続する

1. iPhone を USB で Mac に接続する
2. iPhone で「このコンピュータを信頼しますか？」と出たら **信頼** をタップ
3. Xcode 上部の実行先（スキームの右隣）で、**接続した iPhone の名前** を選択  
   （例: 「Tatsuya の iPhone」）

---

## 3. 署名（Signing）の設定（初回のみ）

実機で動かすには Apple Developer アカウントでの署名が必要です。

1. Xcode 左の **プロジェクトナビゲータ** で一番上の **GiftyTask**（青いアイコン）をクリック
2. 中央の **TARGETS** から **GiftyTask** を選択
3. **Signing & Capabilities** タブを開く
4. **Team** で自分の Apple ID（Personal Team）または開発用チームを選択  
   - 未設定なら **Add Account...** から Apple ID を追加
5. **Bundle Identifier** が他アプリと重ならないように、必要なら変更  
   （例: `com.yourname.GiftyTask`）

---

## 4. 実機で実行する

1. メニュー **Product → Run**（または **⌘R**）
2. 初回は iPhone に「未信頼のデベロッパ」と表示される場合があります  
   → **設定 → 一般 → VPNとデバイス管理** で該当プロファイルを **信頼**
3. アプリが起動したら、以下を確認してください：
   - **ダッシュボード** のアクティビティリング・ユーザーカード（XP・レベル）
   - **タスク** タブでタスクの **完了** ボタン（または長押しで写真撮影完了）
   - 完了時に **触覚（パリン）** が鳴ること
   - ダッシュボードに戻ると **リングと XP が更新** されていること
   - XP が一定値を超えると **レベルアップ** し、専用の振動が鳴ること

---

## 5. トラブルシューティング

| 現象 | 対処 |
|------|------|
| 「GiftyTask をビルドできません」 | **Product → Clean Build Folder**（⇧⌘K）のあと再度 **Run**（⌘R） |
| 実機が一覧に出ない | ケーブル・接続し直し、iPhone で「信頼」を確認。Xcode を再起動 |
| 署名エラー | **Signing & Capabilities** で Team を選び直し、Bundle ID をユニークに変更 |
| 触覚が鳴らない | 実機の **設定 → サウンドと触覚 → システム触覚** がオンか確認。シミュレータでは触覚は鳴りません |

---

編集したソースはすべてプロジェクトに含まれています。  
上記のとおり Xcode で **GiftyTask.xcodeproj** を開き、実機を選んで **Run** すれば、実機で動作確認できます。
